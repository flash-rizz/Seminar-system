@startuml
skinparam monochrome true
skinparam shadowing false

title Evaluator submits an evaluation for a student

actor "Evaluator" as evalActor
participant ":EvaluatorDashboard" as dash
participant ":SeminarSystem" as sys
participant "student:Student" as student
participant "evaluator:Evaluator" as evaluator
participant "evaluation:Evaluation" as evaluation

evalActor -> dash : select student + set sliders + comments
activate dash

opt (optional) click "Calculate Total"
  evalActor -> dash : click "Calculate Total"
  dash -> dash : updateTotal()
  dash -> dash : totalLabel.setText("Total: ...")
end

evalActor -> dash : click "Submit Evaluation"
dash -> dash : handleSubmit(evaluator)
dash -> dash : studentCombo.getSelectedItem()
alt student == null
  dash -> dash : JOptionPane.showMessageDialog("Please select a student.")
else student selected
  dash -> sys : evaluations (read SeminarSystem.evaluations)
  activate sys
  sys --> dash : ArrayList<Object>
  deactivate sys
  dash -> dash : hasAlreadyEvaluated(evaluator, student)\n(loop inside)

  alt duplicate
    dash -> dash : JOptionPane.showMessageDialog("You have already evaluated this student.")
  else not duplicate
    dash -> evaluation : new Evaluation(student, evaluator,\nclarity, methodology, results, comments)
    dash -> sys : evaluations.add(evaluation)
    activate sys
    sys --> dash : ok
    deactivate sys
    dash -> dash : JOptionPane.showMessageDialog("Evaluation submitted. Total: " + evaluation.getTotalScore())
    dash -> dash : reset fields + updateTotal()
  end
end

deactivate dash
@enduml

